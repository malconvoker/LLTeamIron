{
	"name": "eGame",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "eGlobal"
		},
		{
			"eventType": "include",
			"includeSheet": "ePlayer"
		},
		{
			"eventType": "include",
			"includeSheet": "eEnemies"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Debug",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 696147852986058,
							"parameters": {
								"key": 82
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 445614231042696
						}
					],
					"sid": 194677168754001,
					"disabled": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 212600708818270,
							"parameters": {
								"key": 84
							}
						},
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 949803124833316,
							"parameters": {
								"key": 17
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 806498652770048,
							"parameters": {
								"object-to-create": "TextInput",
								"layer": "\"UI\"",
								"x": "0",
								"y": "0"
							}
						}
					],
					"sid": 562481361055381
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-double-clicked",
							"objectClass": "TextInput",
							"sid": 943243023965890
						}
					],
					"actions": [
						{
							"id": "go-to-layout-by-name",
							"objectClass": "System",
							"sid": 377701567017265,
							"parameters": {
								"layout": "TextInput.Text"
							}
						}
					],
					"sid": 224843586080573
				},
				{
					"eventType": "comment",
					"text": "Hide debug"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 856292474329607,
							"parameters": {
								"key": 68
							}
						},
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 778720024156939,
							"parameters": {
								"key": 17
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "DebugTexts",
							"sid": 845205356770461,
							"parameters": {
								"visibility": "toggle"
							}
						},
						{
							"id": "move-to-top",
							"objectClass": "DebugTexts",
							"sid": 560649293647633
						}
					],
					"sid": 100321147823152
				},
				{
					"eventType": "comment",
					"text": "Set debug texts"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 594760575698975
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "TXTcursorangle",
							"sid": 462313237313709,
							"parameters": {
								"text": "\"Touch \" & Functions.GetTouchAngle & \"Â°\""
							}
						},
						{
							"callFunction": "DisplayEnemyData",
							"sid": 196788944705919
						},
						{
							"id": "set-text",
							"objectClass": "TXTtouchmode",
							"sid": 794147050563371,
							"parameters": {
								"text": "\"Touch: \" & TouchMode"
							}
						}
					],
					"sid": 127651907757618,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-screen",
									"objectClass": "Cursor",
									"sid": 643639656142271
								}
							],
							"actions": [
								{
									"id": "set-angle",
									"objectClass": "LOS",
									"sid": 536419113096030,
									"parameters": {
										"angle": "Functions.CursorDistance"
									}
								}
							],
							"sid": 108584810051491
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Display Enemy Pathfinding"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-path-found",
							"objectClass": "EnemyBases",
							"sid": 431508938415016,
							"behaviorType": "Pathfinding"
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 254143657225738,
							"parameters": {
								"object-to-create": "DebugNode",
								"layer": "\"Layer 0\"",
								"x": "EnemyBases.ImagePointX(\"center\")",
								"y": "EnemyBases.ImagePointY(\"center\")"
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "DebugNode",
							"sid": 105684538407763,
							"parameters": {
								"x": "EnemyBases.Pathfinding.NodeXAt(0)",
								"y": "EnemyBases.Pathfinding.NodeYAt(0)"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 515944003683182,
							"parameters": {
								"object-to-create": "TempDmgPing",
								"layer": "\"Layer 0\"",
								"x": "EnemyBases.Pathfinding.NodeXAt(EnemyBases.Pathfinding.NodeCount-1)",
								"y": "EnemyBases.Pathfinding.NodeYAt(EnemyBases.Pathfinding.NodeCount-1)"
							}
						}
					],
					"sid": 603081347208681,
					"disabled": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Copied from pathfinding example"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 922370094675685,
									"parameters": {
										"count": "EnemyBases.Pathfinding.NodeCount"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 646076410883568,
									"parameters": {
										"object-to-create": "DebugNode",
										"layer": "\"Layer 0\"",
										"x": "EnemyBases.Pathfinding.NodeXAt(loopindex)",
										"y": "EnemyBases.Pathfinding.NodeYAt(loopindex)"
									}
								}
							],
							"sid": 205377240789429,
							"disabled": true,
							"children": [
								{
									"eventType": "comment",
									"text": "If it's the last node, change the animation frame to show it's the end."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 849015324665642,
											"parameters": {
												"first-value": "LoopIndex",
												"comparison": 0,
												"second-value": "EnemyBases.Pathfinding.NodeCount - 1"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation-frame",
											"objectClass": "DebugNode",
											"sid": 213463935447815,
											"parameters": {
												"frame-number": "1"
											}
										}
									],
									"sid": 894223255665176,
									"disabled": true
								},
								{
									"eventType": "comment",
									"text": "Otherwise point it to the next node."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 517606471002114
										}
									],
									"actions": [
										{
											"id": "set-angle-toward-position",
											"objectClass": "DebugNode",
											"sid": 372296019979368,
											"parameters": {
												"x": "EnemyBases.Pathfinding.NodeXAt(loopindex + 1)",
												"y": "EnemyBases.Pathfinding.NodeYAt(loopindex + 1)"
											}
										}
									],
									"sid": 119198425461970,
									"disabled": true
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-failed-to-find-path",
							"objectClass": "EnemyBases",
							"sid": 314116571894195,
							"behaviorType": "Pathfinding"
						}
					],
					"actions": [
						{
							"id": "flash",
							"objectClass": "EnemyMasks",
							"sid": 166035770879381,
							"behaviorType": "Flash",
							"parameters": {
								"on-time": "0.1",
								"off-time": "0.1",
								"duration": "0.5"
							}
						}
					],
					"sid": 453439982652054,
					"disabled": true
				}
			],
			"sid": 623352340288189
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Z sorting",
			"description": "Display sprites on top of each other in the correct order",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Set each Mask to the top of the layer in order from top to bottom"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each-ordered",
							"objectClass": "System",
							"sid": 216835531268038,
							"parameters": {
								"object": "Z_Sorting",
								"expression": "Z_Sorting.Y",
								"order": "ascending"
							}
						}
					],
					"actions": [
						{
							"id": "move-to-top",
							"objectClass": "Z_Sorting",
							"sid": 407848615444634
						}
					],
					"sid": 123625758998573
				},
				{
					"eventType": "comment",
					"text": "Set effects on top in order or importance"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 973498288226950
						}
					],
					"actions": [
						{
							"id": "move-to-top",
							"objectClass": "Skill_Shield",
							"sid": 401177825107926
						},
						{
							"id": "move-to-top",
							"objectClass": "e_GhostProjectile",
							"sid": 578817183409150
						},
						{
							"id": "move-to-top",
							"objectClass": "Skill_ManaBlast",
							"sid": 214096257154864
						},
						{
							"id": "move-to-top",
							"objectClass": "TempDmgPing",
							"sid": 840861202251850
						},
						{
							"id": "move-to-top",
							"objectClass": "indicator",
							"sid": 587773550877244
						}
					],
					"sid": 472842404615061
				}
			],
			"sid": 312518732381835
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Effects",
			"description": "General events relating to events, namely destroying once finished",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-animation-finished",
							"objectClass": "indicator",
							"sid": 702056503877151
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "indicator",
							"sid": 323704215530761
						}
					],
					"sid": 288981179617459
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-animation-finished",
							"objectClass": "TempDmgPing",
							"sid": 382142800736256
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "TempDmgPing",
							"sid": 560854244863781
						}
					],
					"sid": 463118528120549
				}
			],
			"sid": 662979051192152
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 591863427417910
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 478369811552712,
					"parameters": {
						"variable": "Turn",
						"value": "0"
					}
				}
			],
			"sid": 737970651318844
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Room Transitions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 974378140490771
						}
					],
					"actions": [],
					"sid": 865810463574620,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-empty",
									"objectClass": "DungeonMap",
									"sid": 152217099978943
								}
							],
							"actions": [
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 170269315478571,
									"parameters": {
										"tag": "\"dungeonmap\"",
										"file": "Dungeon1.json"
									}
								}
							],
							"sid": 331471734576460
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-completed",
							"objectClass": "AJAX",
							"sid": 564815350405488,
							"parameters": {
								"tag": "\"dungeonmap\""
							}
						}
					],
					"actions": [
						{
							"id": "parse",
							"objectClass": "JSON",
							"sid": 701737182618268,
							"parameters": {
								"data": "AJAX.LastData"
							}
						},
						{
							"id": "load",
							"objectClass": "DungeonMap",
							"sid": 973587901266067,
							"parameters": {
								"json": "JSON.ToCompactString"
							}
						}
					],
					"sid": 661522517631688
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-y",
							"objectClass": "PlayerBase",
							"sid": 645457862936900,
							"parameters": {
								"comparison": 0,
								"y-co-ordinate": "0"
							}
						}
					],
					"actions": [
						{
							"id": "go-to-layout-by-name",
							"objectClass": "System",
							"sid": 716899973932241,
							"parameters": {
								"layout": "Functions.NextRoom(\"up\")"
							}
						},
						{
							"id": "set-y",
							"objectClass": "PlayerBase",
							"sid": 420689162164830,
							"parameters": {
								"y": "LayoutHeight-Tile*2"
							}
						}
					],
					"sid": 903598170801576
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-y",
							"objectClass": "PlayerBase",
							"sid": 680863022185648,
							"parameters": {
								"comparison": 0,
								"y-co-ordinate": "LayoutHeight-Tile"
							}
						}
					],
					"actions": [
						{
							"id": "go-to-layout-by-name",
							"objectClass": "System",
							"sid": 636652747290284,
							"parameters": {
								"layout": "Functions.NextRoom(\"down\")"
							}
						},
						{
							"id": "set-y",
							"objectClass": "PlayerBase",
							"sid": 454728780511330,
							"parameters": {
								"y": "Tile"
							}
						}
					],
					"sid": 452019926918321
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-x",
							"objectClass": "PlayerBase",
							"sid": 309784735330909,
							"parameters": {
								"comparison": 0,
								"x-co-ordinate": "0"
							}
						}
					],
					"actions": [
						{
							"id": "go-to-layout-by-name",
							"objectClass": "System",
							"sid": 972294771667143,
							"parameters": {
								"layout": "Functions.NextRoom(\"left\")"
							}
						},
						{
							"id": "set-x",
							"objectClass": "PlayerBase",
							"sid": 726109577405607,
							"parameters": {
								"x": "GameAreaWidth-Tile*2"
							}
						}
					],
					"sid": 658604353861006
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-x",
							"objectClass": "PlayerBase",
							"sid": 248586015678799,
							"parameters": {
								"comparison": 0,
								"x-co-ordinate": "GameAreaWidth-Tile"
							}
						}
					],
					"actions": [
						{
							"id": "go-to-layout-by-name",
							"objectClass": "System",
							"sid": 522954115538738,
							"parameters": {
								"layout": "Functions.NextRoom(\"right\")"
							}
						},
						{
							"id": "set-x",
							"objectClass": "PlayerBase",
							"sid": 681747390711620,
							"parameters": {
								"x": "Tile"
							}
						}
					],
					"sid": 650733979792172
				}
			],
			"sid": 601259909786066
		}
	],
	"sid": 301707553409410
}